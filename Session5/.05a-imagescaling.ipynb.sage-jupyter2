{"backend_state":"ready","kernel":"python3","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"last_backend_state":1732542162903,"last_ipynb_save":1732543906107,"metadata":{"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.6.9"}},"type":"settings"}
{"cell_type":"code","exec_count":10,"id":"b6184b","input":"from matplotlib.colors import LogNorm\nfig, axis = plt.subplots(figsize=(8,8))\nimplot = axis.imshow(image_data,cmap='gray',origin='lower',norm=LogNorm())\naxis.grid(False)\nplt.show()","output":{"0":{"data":{"image/png":"d055a80f313118b25ec18adcefa8f9bdbcec100f","text/plain":"<Figure size 576x576 with 1 Axes>"},"exec_count":10,"metadata":{"image/png":{"height":465,"width":474},"needs_background":"light"},"output_type":"execute_result"}},"pos":16,"type":"cell"}
{"cell_type":"code","exec_count":3,"id":"9db4ce","input":"from IPython.core.display import HTML\ncss_file = '../../styles/styles.css'\nHTML(open(css_file, \"r\").read())","output":{"0":{"data":{"text/html":"<link href='http://fonts.googleapis.com/css?family=Crimson+Text' rel='stylesheet' type='text/css'>\n<link href='http://fonts.googleapis.com/css?family=Kameron' rel='stylesheet' type='text/css'>\n<link href='http://fonts.googleapis.com/css?family=Lato:200,300,400' rel='stylesheet' type='text/css'>\n<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>\n<style>\n\n@font-face {\n    font-family: \"Computer Modern\";\n    src: url('http://mirrors.ctan.org/fonts/cm-unicode/fonts/otf/cmunss.otf');\n}\n\n#notebook_panel { /* main background */\n    background: rgb(245,245,245);\n}\n\n\ndiv #notebook { /* centre the content */\n    background: #fff; /* white background for content */\n    margin: auto;\n    padding-left: 0em;\n}\n\n\n#notebook li { /* More space between bullet points */\n    margin-top:0.8em;\n}\n\n/* draw border around running cells */\ndiv.cell.border-box-sizing.code_cell.running { \n    border: 1px solid #111;\n}\n\n/* Put a solid color box around each cell and its output, visually linking them*/\ndiv.cell.code_cell {\n    background-color: rgb(256,256,256); \n    border-radius: 0px; \n    /* width: 105ex; */\n    padding: 0.5em;\n    margin-left:1em;\n    margin-top: 1em;\n}\n\ndiv.input_area {\n    border-color: rgba(0,0,0,0.10);\n    background: rbga(0,0,0,0.5);\n}\n\n/*\ndiv.text_cell {\n    max-width: 105ex; /* instead of 100%, */\n}\n*/\n\ndiv.text_cell_render {\n    font-family: \"Crimson Text\";\n    font-size: 12pt;\n    line-height: 145%; /* added for some line spacing of text. */\n}\n\ndiv.text_cell_render h1,\ndiv.text_cell_render h2,\ndiv.text_cell_render h3,\ndiv.text_cell_render h4,\ndiv.text_cell_render h5,\ndiv.text_cell_render h6 {\n    font-family: 'Kameron';\n    font-weight: 300;\n}\n\ndiv.text_cell_render h1 {\n    font-size: 24pt;\n}\n\ndiv.text_cell_render h2 {\n    font-size: 18pt;\n}\n\ndiv.text_cell_render h3 {\n    font-size: 14pt;\n}\n\n.rendered_html pre,\n.rendered_html code {\n    font-size: medium;\n    background-color: rgba(246,246,246,1);\n    padding: 2px;\n}\n\n.rendered_html ol {\n    list-style:decimal;\n    margin: 1em 2em;\n}\n\n.CodeMirror pre{\n        font-family: 'Source Code Pro', Consolas, monocco, monospace;\n}\n\n/* Make space between the fa icon and the rest of the header */\n.panel-heading h1 span,\n.panel-heading h2 span,\n.panel-heading h3 span,\n.panel-heading h4 span,\n.panel-heading h5 span,\n.panel-heading h6 span {\n    padding-right: 10px;\n}\n\n.fa {\n    padding: 5px;\n    }\n   \nkbd {\n    padding:0.1em 0.6em;\n    border:1px solid #ccc;\n    font-size:11px;\n    font-family:Arial,Helvetica,sans-serif;\n    background-color:#f7f7f7;\n    color:#333;\n    -moz-box-shadow:0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;\n    -webkit-box-shadow:0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;\n    box-shadow:0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;\n    -moz-border-radius:3px;\n    -webkit-border-radius:3px;\n    border-radius:3px;\n    display:inline-block;\n    margin:0 0.1em;\n    text-shadow:0 1px 0 #fff;\n    line-height:1.4;\n    white-space:nowrap;\n}\n\n</style>\n<script>\n    MathJax.Hub.Config({\n                        TeX: {\n                           extensions: [\"AMSmath.js\"],\n                           equationNumbers: { autoNumber: \"AMS\", useLabelIds: true}\n                           },\n                tex2jax: {\n                    inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ],\n                    displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ]\n                },\n                displayAlign: 'center', // Change this to 'center' to center equations.\n                \"HTML-CSS\": {\n                    styles: {'.MathJax_Display': {\"margin\": 4}}\n                }\n        });\n</script>","text/plain":"<IPython.core.display.HTML object>"},"exec_count":3,"output_type":"execute_result"}},"pos":1,"type":"cell"}
{"cell_type":"code","exec_count":4,"id":"832fe8","input":"import numpy as np\n%matplotlib inline\nimport matplotlib.pyplot as plt\n\nfrom astropy.io import fits\nfrom astropy.utils.data import download_file\n\nimage_file = download_file('http://data.astropy.org/tutorials/FITS-images/HorseHead.fits', cache=False)\nimage_data = fits.getdata(image_file)","pos":4,"type":"cell"}
{"cell_type":"code","exec_count":5,"id":"c35ae7","input":"fig, axis = plt.subplots(figsize=(8,8))\nimplot = axis.imshow(image_data,cmap='gray',origin='lower')\naxis.grid(False)\nplt.show()","output":{"0":{"data":{"image/png":"c3cae2f1a415acb4776edf1aa76beaab2d477733","text/plain":"<Figure size 576x576 with 1 Axes>"},"exec_count":5,"metadata":{"image/png":{"height":465,"width":474},"needs_background":"light"},"output_type":"execute_result"}},"pos":6,"type":"cell"}
{"cell_type":"code","exec_count":6,"id":"23f085","input":"NBINS=500\nfig, axis = plt.subplots()\n\n#notice the use of image_data.flatten() to make a 1D array from the 2D array\n#without this, we'd get one histogram per row of the image!\naxis.hist(image_data.flatten(), NBINS)\naxis.set_xlabel('Pixel value')\naxis.set_ylabel('Number of pixels')\nplt.show()","output":{"0":{"data":{"image/png":"c7e0a607647e8e4163d1742805742da6fffedbab","text/plain":"<Figure size 432x288 with 1 Axes>"},"exec_count":6,"metadata":{"image/png":{"height":261,"width":395},"needs_background":"light"},"output_type":"execute_result"}},"pos":8,"type":"cell"}
{"cell_type":"code","exec_count":7,"id":"06bb9a","input":"fig, axis = plt.subplots(figsize=(8,8))\nimplot = axis.imshow(image_data,cmap='gray',origin='lower',vmax=15000)\naxis.grid(False)\nplt.show()","output":{"0":{"data":{"image/png":"0270e6269b5b47292b9da972f35a4331156d42f5","text/plain":"<Figure size 576x576 with 1 Axes>"},"exec_count":7,"metadata":{"image/png":{"height":465,"width":474},"needs_background":"light"},"output_type":"execute_result"}},"pos":10,"type":"cell"}
{"cell_type":"code","exec_count":8,"id":"95e163","input":"fig, axis = plt.subplots(figsize=(8,8))\nimplot = axis.imshow(image_data,cmap='gray',origin='lower',vmax=15000,vmin=6000)\naxis.grid(False)\nplt.show()","output":{"0":{"data":{"image/png":"546d0f4ee78e28adbd67ad630345c42a6a345970","text/plain":"<Figure size 576x576 with 1 Axes>"},"exec_count":8,"metadata":{"image/png":{"height":465,"width":474},"needs_background":"light"},"output_type":"execute_result"}},"pos":12,"type":"cell"}
{"cell_type":"code","exec_count":9,"id":"05cba5","input":"vmin, vmax = np.percentile(image_data, [1,99]) # returns one value for each percentile in list\nfig, axis = plt.subplots(figsize=(8,8))\nimplot = axis.imshow(image_data,cmap='gray',origin='lower',vmax=vmax,vmin=vmin)\naxis.grid(False)\nplt.show()","output":{"0":{"data":{"image/png":"0b4f5b8034dfd1cf63d678e85cd30d6e74fb7a29","text/plain":"<Figure size 576x576 with 1 Axes>"},"exec_count":9,"metadata":{"image/png":{"height":465,"width":474},"needs_background":"light"},"output_type":"execute_result"}},"pos":14,"type":"cell"}
{"cell_type":"markdown","id":"2673df","input":"# Understanding Image Scaling and Display","pos":2,"type":"cell"}
{"cell_type":"markdown","id":"6146de","input":"### Non-linear scales\n\nAll the examples above use a linear scale. If the pixel value doubles, the brightness in the image doubles. Non-linear scales can be used to enhance certain parts of the image. For example, if the output color is logarithmically related to the input value, it can enhance the dark areas:","pos":15,"type":"cell"}
{"cell_type":"markdown","id":"765329","input":"Notice how we've enhanced the image contrast, but we've lost detail in the brighter regions? We can also choose which value represents pure black with the ```vmin``` argument:","pos":11,"type":"cell"}
{"cell_type":"markdown","id":"827963","input":"###### The cell below loads the visual style of the notebook when run.","pos":0,"type":"cell"}
{"cell_type":"markdown","id":"af0f77","input":"The astropy library itself contains many useful transformations that are sometimes used to display astronomical images. If you're interested in these, take a look at the [documentation](http://astropy.readthedocs.org/en/stable/visualization/normalization.html#intervals-and-normalization)","pos":17,"type":"cell"}
{"cell_type":"markdown","id":"ba8074","input":"We can see that the image contains pixel values from roughly 5,000 to nearly 23,000. Most pixels have values of less than 15,000 however. We might want to force 15,000 (and all pixel values higher than that) to display as pure white. We can do that with the ```vmax``` argument:","pos":9,"type":"cell"}
{"cell_type":"markdown","id":"d8fbcb","input":"### Automatically finding vmin, vmax using percentiles\n\nNumpy has a useful function for finding the percentiles of the values in an array. For example\n```np.percentile(image_data,[20])``` would find the value corresponding to the 20th percentile - i.e. 20 percent of all pixels would have a value less than or equal to this value. Most images look quite nice when the black point is set to the 1st percentile and the white point to the 99th percentile. This means the full range of black to white contains most of the data, but the odd outlying low or high pixel won't set our range:","pos":13,"type":"cell"}
{"cell_type":"markdown","id":"eefeae","input":"We'll start by downloading the same image used in the main tutorial and reading the fits file.","pos":3,"type":"cell"}
{"cell_type":"markdown","id":"fbaa3e","input":"The ```image_data``` array is a two-dimensional array. Each entry is a number representing the flux falling on that pixel of the CCD. When we display the image, we have to choose a [colormap](../../resources/reference.html#colormap) - a mapping between the number in the array, and the color in the image. \n\nIn the example below, this colormap is a linear grayscale, with black representing the smallest value in the image_data, and white the largest.","pos":5,"type":"cell"}
{"cell_type":"markdown","id":"fd7a12","input":"Maybe we want to change the standard colormap? To understand a bit more what's going on here, let's plot a histogram of all the pixel values in the image data:","pos":7,"type":"cell"}
{"id":0,"time":1732543744635,"type":"user"}
{"last_load":1732542162896,"type":"file"}